#  Main body of the installation makefile for the GALAHAD library

#  N. Gould, D. Orban and Ph. L. Toint.
#  This version: 2022-10-26

SHELL = /bin/$(BINSHELL)

#  main compilations and runs

#  -------------------------------
#  everything with CUTEst not AMPL
#  -------------------------------

all_cutest: all_cutest_$(PRECIS)

all_cutest_single:
	( cd lancelot ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
                          lancelotb_sif PRECIS=single PWD=$(PWD)/lancelot )
	( cd all_qp   ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
                          all_cutest all_qplib PRECIS=single PWD=$(PWD)/all_qp )
	( cd all_rq   ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
                         all_cutest PRECIS=single PWD=$(PWD)/all_rq )
	( cd filtrane ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
                         filtrane_cutest PRECIS=single PWD=$(PWD)/filtrane )
	( cd wcp      ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
                         wcp_cutest PRECIS=single PWD=$(PWD)/wcp )
	( cd bsc      ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
                         bsc PRECIS=single PWD=$(PWD)/bsc )
	( cd fdh      ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
                         fdh_cutest PRECIS=single PWD=$(PWD)/fdh )
	( cd tru      ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
                         tru_cutest PRECIS=single PWD=$(PWD)/tru )
	( cd arc      ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
                         arc_cutest PRECIS=single PWD=$(PWD)/arc )
	( cd trb      ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
                         trb_cutest PRECIS=single PWD=$(PWD)/trb )
	( cd nls      ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
                         nls_cutest PRECIS=single PWD=$(PWD)/nls )
	( cd all_go   ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
                         all_cutest PRECIS=single PWD=$(PWD)/all_go )

all_cutest_double:
	( cd lancelot ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
                         lancelotb_sif PRECIS=double PWD=$(PWD)/lancelot )
	( cd all_qp   ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
                         all_cutest all_qplib PRECIS=double PWD=$(PWD)/all_qp )
	( cd all_rq   ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
                        all_cutest PRECIS=double PWD=$(PWD)/all_rq )
	( cd filtrane ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
                        filtrane_cutest PRECIS=double PWD=$(PWD)/filtrane )
	( cd wcp      ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
                          wcp_cutest PRECIS=double PWD=$(PWD)/wcp )
	( cd bsc      ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
                          bsc PRECIS=double PWD=$(PWD)/bsc )
	( cd fdh      ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
                          fdh_cutest PRECIS=double PWD=$(PWD)/fdh )
	( cd tru      ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
                          tru_cutest PRECIS=double PWD=$(PWD)/tru )
	( cd arc      ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
                          arc_cutest PRECIS=double PWD=$(PWD)/arc )
	( cd trb      ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
                          trb_cutest PRECIS=double PWD=$(PWD)/trb )
	( cd nls      ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
                          nls_cutest PRECIS=double PWD=$(PWD)/nls )
	( cd all_go   ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
                        all_cutest PRECIS=double PWD=$(PWD)/all_go )

#  -------------------------------
#  everything with AMPL not CUTEst
#  -------------------------------

all_ampl: all_ampl_$(PRECIS)

all_ampl_single:
	( cd ampl ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
                    galahad_ampl_single PRECIS=single PWD=$(PWD)/ampl \
                      AMPLDIR=$(AMPLDIR) \
                      CUSTOM_AMPL_FLAGS="-DQP -DCQP -DQPA -DQPB -DQPC \
                                         -DPRESOLVE -DFILTRANE -DLANCELOT" )

all_ampl_double:
	( cd ampl ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
                    galahad_ampl_double PRECIS=double PWD=$(PWD)/ampl \
                      AMPLDIR=$(AMPLDIR) \
                      CUSTOM_AMPL_FLAGS="-DQP -DCQP -DQPA -DQPB -DQPC \
                                         -DPRESOLVE -DFILTRANE -DLANCELOT" )

#  ----------------------------
#  everything with C interfaces
#  ----------------------------

all_ciface: all_ciface_$(PRECIS)

all_ciface_single:
	( cd all_qp   ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
                         all_ciface PRECIS=single PWD=$(PWD)/all_qp )
	( cd all_rq   ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
                         all_ciface PRECIS=single PWD=$(PWD)/all_rq )
	( cd wcp      ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
                         wcp_ciface PRECIS=single PWD=$(PWD)/wcp )
	( cd tru      ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
                         tru_ciface PRECIS=single PWD=$(PWD)/tru )
	( cd arc      ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
                         arc_ciface PRECIS=single PWD=$(PWD)/arc )
	( cd trb      ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
                         trb_ciface PRECIS=single PWD=$(PWD)/trb )
	( cd nls      ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
                         nls_ciface PRECIS=single PWD=$(PWD)/nls )
	( cd all_go   ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
                         all_ciface PRECIS=single PWD=$(PWD)/all_go )

all_ciface_double:
	( cd all_qp   ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
                         all_ciface PRECIS=double PWD=$(PWD)/all_qp )
	( cd all_rq   ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
                        all_ciface PRECIS=double PWD=$(PWD)/all_rq )
	( cd wcp      ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
                          wcp_ciface PRECIS=double PWD=$(PWD)/wcp )
	( cd tru      ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
                          tru_ciface PRECIS=double PWD=$(PWD)/tru )
	( cd arc      ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
                          arc_ciface PRECIS=double PWD=$(PWD)/arc )
	( cd trb      ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
                          trb_ciface PRECIS=double PWD=$(PWD)/trb )
	( cd nls      ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
                          nls_ciface PRECIS=double PWD=$(PWD)/nls )
	( cd all_go   ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
                          all_ciface PRECIS=double PWD=$(PWD)/all_go )

#  ---------------------------------
#  everything with python interfaces
#  ---------------------------------

all_pyiface: all_pyiface_$(PRECIS)

all_pyiface_single: all_ciface_single
	( cd all_qp   ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
                         all_qp_pyiface PRECIS=single PWD=$(PWD)/all_qp )
	( cd all_rq   ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
                         all_rq_pyiface PRECIS=single PWD=$(PWD)/all_rq )
	( cd wcp      ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
                         wcp_pyiface PRECIS=single PWD=$(PWD)/wcp )
	( cd tru      ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
                         tru_pyiface PRECIS=single PWD=$(PWD)/tru )
	( cd arc      ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
                         arc_pyiface PRECIS=single PWD=$(PWD)/arc )
	( cd trb      ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
                         trb_pyiface PRECIS=single PWD=$(PWD)/trb )
	( cd nls      ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
                         nls_pyiface PRECIS=single PWD=$(PWD)/nls )
	( cd all_go   ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
                         all_pyiface PRECIS=single PWD=$(PWD)/all_go )

all_pyiface_double: all_ciface_double
	( cd all_qp   ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
                         all_qp_pyiface PRECIS=double PWD=$(PWD)/all_qp )
	( cd all_rq   ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
                         all_rq_pyiface PRECIS=double PWD=$(PWD)/all_rq )
	( cd wcp      ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
                         wcp_pyiface PRECIS=double PWD=$(PWD)/wcp )
	( cd tru      ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
                         tru_pyiface PRECIS=double PWD=$(PWD)/tru )
	( cd arc      ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
                         arc_pyiface PRECIS=double PWD=$(PWD)/arc )
	( cd trb      ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
                         trb_pyiface PRECIS=double PWD=$(PWD)/trb )
	( cd nls      ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
                         nls_pyiface PRECIS=double PWD=$(PWD)/nls )
	( cd all_go   ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
                          all_pyiface PRECIS=double PWD=$(PWD)/all_go )

#  --------------------------------
#  everything with julia interfaces (not yet fully functional!)
#  --------------------------------

all_jliface: all_jliface_$(PRECIS)

all_jliface_single: all_ciface_single create_one_shared
all_jliface_double: all_ciface_double create_one_shared

#  ---------------------------
#  everything for distribution
#  ---------------------------

all: all_$(PRECIS)

all_single: all_cutest_single all_ampl_single
all_double: all_cutest_double all_ampl_double

#  ----------------------
#  everything stand-alone
#  ----------------------

all_standalone: all_standalone_$(PRECIS)

all_standalone_single:
	( cd lancelot  ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
                          lancelotb PRECIS=single PWD=$(PWD)/lancelot )
	( cd all_qp   ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
                          all PRECIS=single PWD=$(PWD)/all_qp )
	( cd all_rq   ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
                          all PRECIS=single PWD=$(PWD)/all_rq )
	( cd filtrane ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
                          filtrane PRECIS=single PWD=$(PWD)/filtrane )
	( cd wcp      ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
                          wcp PRECIS=single PWD=$(PWD)/wcp )
	( cd bsc      ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
                          bsc PRECIS=single PWD=$(PWD)/bsc )
	( cd fdh      ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
                          fdh PRECIS=single PWD=$(PWD)/fdh )
	( cd tru      ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
                          tru PRECIS=single PWD=$(PWD)/tru )
	( cd arc      ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
                          arc PRECIS=single PWD=$(PWD)/arc )
	( cd trb      ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
                          trb PRECIS=single PWD=$(PWD)/trb )
	( cd nls      ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
                          nls PRECIS=single PWD=$(PWD)/nls )
	( cd all_go   ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
                          all PRECIS=single PWD=$(PWD)/all_go )

all_standalone_double:
	( cd lancelot ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
                          lancelotb PRECIS=double PWD=$(PWD)/lancelot )
	( cd all_qp   ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
                          all PRECIS=double PWD=$(PWD)/all_qp )
	( cd all_rq   ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
                         all PRECIS=double PWD=$(PWD)/all_rq )
	( cd filtrane ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
                          filtrane PRECIS=double PWD=$(PWD)/filtrane )
	( cd wcp      ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
                          wcp PRECIS=double PWD=$(PWD)/wcp )
	( cd bsc      ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
                          bsc PRECIS=double PWD=$(PWD)/bsc )
	( cd fdh      ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
                          fdh PRECIS=double PWD=$(PWD)/fdh )
	( cd tru      ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
                          tru PRECIS=double PWD=$(PWD)/tru )
	( cd arc      ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
                          arc PRECIS=double PWD=$(PWD)/arc )
	( cd trb      ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
                          trb PRECIS=double PWD=$(PWD)/trb )
	( cd nls      ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
                          nls PRECIS=double PWD=$(PWD)/nls )
	( cd all_go   ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
                         all PRECIS=double PWD=$(PWD)/all_go )

#  --------------------------------------------------------
#  everything including current developments excluding s2qp
#  --------------------------------------------------------

all_current_without_s2qp: all_current_without_s2qp_$(PRECIS)

all_current_without_s2qp_single: all_cutest_single
#	( cd qp   ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
#                     qp_cutest_current PRECIS=single PWD=$(PWD)/qp )
	( cd oblivion/lpsqp   ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
                     lpsqp_cutest PRECIS=single PWD=$(PWD)/oblivion/lpsqp )
	( cd oblivion/superb   ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
                     superb_cutest PRECIS=single PWD=$(PWD)/oblivion/superb )
	( cd oblivion/fastr   ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
                     fastr_cutest PRECIS=single PWD=$(PWD)/oblivion/fastr )
	( cd oblivion/sqp   ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
                     sqp_cutest PRECIS=single PWD=$(PWD)/oblivion/sqp )
	( cd oblivion/lcf   ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
                     lcf_cutest PRECIS=single PWD=$(PWD)/oblivion/lcf )
	( cd oblivion/funnel ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
                     funnel_cutest PRECIS=single PWD=$(PWD)/ oblivion/funnel )
	( cd oblivion/ism ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
                     ism_cutest PRECIS=single PWD=$(PWD)/oblivion/ism )
	( cd oblivion/ermo ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
                     ermo_cutest PRECIS=single PWD=$(PWD)/oblivion/ermo )
	( cd forthcoming/barc ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
                     barc_cutest PRECIS=single PWD=$(PWD)/forthcoming/barc )
	( cd forthcoming/fisqp ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
                     fisqp_cutest PRECIS=single PWD=$(PWD)/forthcoming/fisqp )

all_current_without_s2qp_double: all_cutest_double
#	( cd qp   ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
#                     qp_cutest_current PRECIS=double PWD=$(PWD)/qp )
	( cd oblivion/lpsqp   ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
                     lpsqp_cutest PRECIS=double PWD=$(PWD)/oblivion/lpsqp )
	( cd oblivion/superb   ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
                     superb_cutest PRECIS=double PWD=$(PWD)/oblivion/superb )
	( cd oblivion/fastr   ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
                     fastr_cutest PRECIS=double PWD=$(PWD)/oblivion/fastr )
	( cd oblivion/sqp   ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
                     sqp_cutest PRECIS=double PWD=$(PWD)/oblivion/sqp )
	( cd oblivion/lcf   ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
                     lcf_cutest PRECIS=double PWD=$(PWD)/oblivion/lcf )
	( cd oblivion/funnel ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
                     funnel_cutest PRECIS=double PWD=$(PWD)/oblivion/funnel )
	( cd oblivion/ism ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
                     ism_cutest PRECIS=double PWD=$(PWD)/oblivion/ism )
	( cd oblivion/ermo ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
                     ermo_cutest PRECIS=double PWD=$(PWD)/oblivion/ermo )
	( cd forthcoming/barc ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
                     barc_cutest PRECIS=double PWD=$(PWD)/forthcoming/barc )
	( cd forthcoming/fisqp ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
                     fisqp_cutest PRECIS=double PWD=$(PWD)/forthcoming/fisqp )

#  -----------------------------------------
#  everything including current developments
#  -----------------------------------------

all_current: all_current_$(PRECIS)

all_current_single: all_current_without_s2qp_single
	( cd oblivion/s2qp ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
                     s2qp_cutest PRECIS=single PWD=$(PWD)oblivion//s2qp )

all_current_double: all_current_without_s2qp_double
	( cd oblivion/s2qp ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
                     s2qp_cutest PRECIS=double PWD=$(PWD)/oblivion/s2qp )

#  -------- -----------------------------------------
#  everything including current developments and AMPL
#  -------- -----------------------------------------

all_current_with_ampl: all_current_with_ampl_$(PRECIS)

all_current_with_ampl_single: all_current_single
	( cd ampl ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
                     ampl PRECIS=single PWD=$(PWD)/ampl \
            CUSTOM_AMPL_FLAGS="-DQP -DCQP -DQPA -DQPB \
                               -DQPC -DPRESOLVE -DFILTRANE -DLANCELOT" )

all_current_with_ampl_double: all_current_double
	( cd ampl ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
                     ampl PRECIS=double PWD=$(PWD)/ampl \
            CUSTOM_AMPL_FLAGS="-DQP -DCQP -DQPA -DQPB \
                               -DQPC -DPRESOLVE -DFILTRANE -DLANCELOT" )

#  -------------------------------------------------------------
#  everything including current developments and AMPL and Matlab
#  -------------------------------------------------------------

all_current_with_ampl_and_matlab: all_current_with_ampl_and_matlab_$(PRECIS)

all_current_with_ampl_and_matlab_single: all_current_single
	( cd ampl ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
                     ampl PRECIS=single PWD=$(PWD)/ampl \
            CUSTOM_AMPL_FLAGS="-DQP -DCQP -DQPA -DQPB \
                               -DQPC -DPRESOLVE -DFILTRANE -DLANCELOT" )
	( cd matlab ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
                     all_current PRECIS=single PWD=$(PWD)/matlab )

all_current_with_ampl_and_matlab_double: all_current_double
	( cd ampl ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
                     ampl PRECIS=double PWD=$(PWD)/ampl \
            CUSTOM_AMPL_FLAGS="-DQP -DCQP -DQPA -DQPB \
                               -DQPC -DPRESOLVE -DFILTRANE -DLANCELOT" )
	( cd matlab ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
                     all_current PRECIS=double PWD=$(PWD)/matlab )

#  ----------------------------------------------------
#  everything including current developments and Matlab
#  ----------------------------------------------------

all_current_and_matlab: all_current_and_matlab_$(PRECIS)

all_current_and_matlab_single: all_current_single
	( cd matlab ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
                     all PRECIS=single PWD=$(PWD)/matlab )

all_current_and_matlab_double: all_current_double
	( cd matlab ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
                     all PRECIS=double PWD=$(PWD)/matlab )

#  ---------------------
#  everything for Matlab
#  ---------------------

all_matlab: all_matlab_$(PRECIS)

all_matlab_single:
	( cd matlab ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
                     all PRECIS=single PWD=$(PWD)/matlab )
all_matlab_double:
	( cd matlab ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
                     all PRECIS=double PWD=$(PWD)/matlab )

#  ------------------
#  comprehensive test
#  ------------------

test: test_$(PRECIS)
test_single:
	( cd lancelot ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) test \
                      PRECIS=single PWD=$(PWD)/lancelot )
	( cd all_qp   ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) test \
                      PRECIS=single PWD=$(PWD)/all_qp )
	( cd all_rq   ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) test \
                      PRECIS=single PWD=$(PWD)/all_rq )
	( cd filtrane ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) test \
                      PRECIS=single PWD=$(PWD)/filtrane )
	( cd wcp  ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) test \
                      PRECIS=single PWD=$(PWD)/wcp )
	( cd bsc  ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) test \
                      PRECIS=single PWD=$(PWD)/bsc )
#	( cd fdh  ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) test \
#                      PRECIS=single PWD=$(PWD)/fdh )
	( cd tru  ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) test \
                      PRECIS=single PWD=$(PWD)/tru )
	( cd arc  ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) test \
                      PRECIS=single PWD=$(PWD)/arc )
	( cd trb  ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) test \
                      PRECIS=single PWD=$(PWD)/trb )
	( cd all_go   ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) test \
                      PRECIS=single PWD=$(PWD)/all_go )
	( cd lms  ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) test \
                      PRECIS=single PWD=$(PWD)/lms )
	( cd sls  ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) test \
                      PRECIS=single PWD=$(PWD)/sls )
	( cd uls  ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) test \
                      PRECIS=single PWD=$(PWD)/uls )
	( cd sbls  ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) test \
                      PRECIS=single PWD=$(PWD)/sbls )
test_double:
	( cd lancelot ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) test \
                      PRECIS=double PWD=$(PWD)/lancelot )
	( cd all_qp  ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) test \
                      PRECIS=double PWD=$(PWD)/all_qp )
	( cd all_rq  ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) test \
                      PRECIS=double PWD=$(PWD)/all_rq )
	( cd filtrane  ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) test \
                      PRECIS=double PWD=$(PWD)/filtrane )
	( cd wcp  ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) test \
                      PRECIS=double PWD=$(PWD)/wcp )
	( cd bsc  ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) test \
                      PRECIS=double PWD=$(PWD)/bsc )
#	( cd fdh  ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) test \
#                      PRECIS=double PWD=$(PWD)/fdh )
	( cd tru  ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) test \
                      PRECIS=double PWD=$(PWD)/tru )
	( cd arc  ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) test \
                      PRECIS=double PWD=$(PWD)/arc )
	( cd trb  ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) test \
                      PRECIS=double PWD=$(PWD)/trb )
	( cd all_go  ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) test \
                      PRECIS=double PWD=$(PWD)/all_go )
	( cd lms  ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) test \
                      PRECIS=double PWD=$(PWD)/lms )
	( cd sls  ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) test \
                      PRECIS=double PWD=$(PWD)/sls )
	( cd uls  ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) test \
                      PRECIS=double PWD=$(PWD)/uls )
	( cd sbls  ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) test \
                      PRECIS=double PWD=$(PWD)/sbls )


#  ---------------
#  test everything
#  ---------------

tests: tests_$(PRECIS)
tests_single:
	( cd lancelot ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) tests \
                      PRECIS=single PWD=$(PWD)/lancelot )
	( cd all_qp   ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) tests \
                      PRECIS=single PWD=$(PWD)/all_qp )
	( cd all_rq   ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) tests \
                      PRECIS=single PWD=$(PWD)/all_rq )
	( cd filtrane   ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) tests \
                      PRECIS=single PWD=$(PWD)/filtrane )
	( cd wcp  ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) tests \
                      PRECIS=single PWD=$(PWD)/wcp )
	( cd bsc  ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) tests \
                      PRECIS=single PWD=$(PWD)/bsc )
#	( cd fdh  ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) tests \
#                      PRECIS=single PWD=$(PWD)/fdh )
	( cd tru  ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) tests \
                      PRECIS=single PWD=$(PWD)/tru )
	( cd arc  ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) tests \
                      PRECIS=single PWD=$(PWD)/arc )
	( cd trb  ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) tests \
                      PRECIS=single PWD=$(PWD)/trb )
	( cd all_go   ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) tests \
                      PRECIS=single PWD=$(PWD)/all_go )
	( cd lms  ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) tests \
                      PRECIS=single PWD=$(PWD)/lms )
	( cd sls  ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) tests \
                      PRECIS=single PWD=$(PWD)/sls )
	( cd uls  ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) tests \
                      PRECIS=single PWD=$(PWD)/uls )
	( cd sbls  ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) tests \
                      PRECIS=single PWD=$(PWD)/sbls )
tests_double:
	( cd lancelot ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) tests \
                      PRECIS=double PWD=$(PWD)/lancelot )
	( cd all_qp  ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) tests \
                      PRECIS=double PWD=$(PWD)/all_qp )
	( cd all_rq  ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) tests \
                      PRECIS=double PWD=$(PWD)/all_rq )
	( cd filtrane  ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) tests \
                      PRECIS=double PWD=$(PWD)/filtrane )
	( cd wcp  ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) tests \
                      PRECIS=double PWD=$(PWD)/wcp )
	( cd bsc  ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) tests \
                      PRECIS=double PWD=$(PWD)/bsc )
#	( cd fdh  ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) tests \
#                      PRECIS=double PWD=$(PWD)/fdh )
	( cd tru  ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) tests \
                      PRECIS=double PWD=$(PWD)/tru )
	( cd arc  ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) tests \
                      PRECIS=double PWD=$(PWD)/arc )
	( cd trb  ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) tests \
                      PRECIS=double PWD=$(PWD)/trb )
	( cd all_go  ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) tests \
                      PRECIS=double PWD=$(PWD)/all_go )
	( cd lms  ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) tests \
                      PRECIS=double PWD=$(PWD)/lms )
	( cd sls  ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) tests \
                      PRECIS=double PWD=$(PWD)/sls )
	( cd uls  ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) tests \
                      PRECIS=double PWD=$(PWD)/uls )
	( cd sbls  ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) tests \
                      PRECIS=double PWD=$(PWD)/sbls )

#  ------------------------------------------------------
#  test everything except SIF/CUTEst and QPLIB interfaces
#  ------------------------------------------------------

tests_full: tests_full_$(PRECIS)
test_full: tests_full
test_all: tests_full

tests_full_single:
	( cd lancelot ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
                         test_full PRECIS=single PWD=$(PWD)/lancelot )
	( cd all_qp   ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
                         test_full PRECIS=single PWD=$(PWD)all_/qp )
	( cd all_rq   ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
                         test_full PRECIS=single PWD=$(PWD)/all_rq )
	( cd filtrane ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
                         test_full PRECIS=single PWD=$(PWD)/filtrane )
	( cd wcp      ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
                            test_full  PRECIS=single PWD=$(PWD)/wcp )
	( cd bsc      ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
                            test_full  PRECIS=single PWD=$(PWD)/bsc )
#	( cd fdh      ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
#                           test_full   PRECIS=single PWD=$(PWD)/fdh )
	( cd tru      ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
                            test_full  PRECIS=single PWD=$(PWD)/tru )
	( cd arc      ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
                            test_full  PRECIS=single PWD=$(PWD)/arc )
	( cd trb      ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
                            test_full  PRECIS=single PWD=$(PWD)/trb )
	( cd all_go   ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
                         test_full PRECIS=single PWD=$(PWD)/all_go )
	( cd lms      ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
                            test_full  PRECIS=single PWD=$(PWD)/lms )
	( cd sls      ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
                            test_full  PRECIS=single PWD=$(PWD)/sls )
	( cd uls      ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
                            test_full  PRECIS=single PWD=$(PWD)/uls )
	( cd sbls     ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
                           test_full  PRECIS=single PWD=$(PWD)/sbls )

tests_full_double:
	( cd lancelot ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
                         test_full PRECIS=double PWD=$(PWD)/lancelot )
	( cd all_qp   ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
                          test_full PRECIS=double PWD=$(PWD)/all_qp )
	( cd all_rq   ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
                           test_full PRECIS=double PWD=$(PWD)/all_rq )
	( cd filtrane ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
                          test_full PRECIS=double PWD=$(PWD)/filtrane )
	( cd wcp      ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
                            test_full  PRECIS=double PWD=$(PWD)/wcp )
	( cd bsc      ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
                            test_full  PRECIS=double PWD=$(PWD)/bsc )
#	( cd fdh      ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
#                           test_full  PRECIS=double PWD=$(PWD)/fdh )
	( cd tru      ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
                            test_full  PRECIS=double PWD=$(PWD)/tru )
	( cd arc      ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
                            test_full  PRECIS=double PWD=$(PWD)/arc )
	( cd trb      ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
                            test_full  PRECIS=double PWD=$(PWD)/trb )
	( cd all_go   ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
                           test_full PRECIS=double PWD=$(PWD)/all_go )
	( cd lms      ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
                            test_full  PRECIS=double PWD=$(PWD)/lms )
	( cd sls      ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
                            test_full  PRECIS=double PWD=$(PWD)/sls )
	( cd uls      ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
                            test_full  PRECIS=double PWD=$(PWD)/uls )
	( cd sbls     ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
                        test_full  PRECIS=double PWD=$(PWD)/sbls )

#  -------------------------
#  spec tests for everything
#  -------------------------

test_spec: test_spec_$(PRECIS)

test_spec_single:
	( cd lancelot ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) test_spec \
                          PRECIS=single PWD=$(PWD)/lancelot )
	( cd all_qp   ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) test_spec \
                          PRECIS=single PWD=$(PWD)/all_qp )
	( cd all_rq   ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) test_spec \
                          PRECIS=single PWD=$(PWD)/all_rq )
	( cd filtrane  ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) test_spec \
                          PRECIS=single PWD=$(PWD)/filtrane )
	( cd wcp      ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) test_spec \
                          PRECIS=single PWD=$(PWD)/wcp )
	( cd bsc      ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) test_spec \
                          PRECIS=single PWD=$(PWD)/bsc )
	( cd fdh      ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) test_spec \
                          PRECIS=single PWD=$(PWD)/fdh )
	( cd tru      ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) test_spec \
                          PRECIS=single PWD=$(PWD)/tru )
	( cd arc      ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) test_spec \
                          PRECIS=single PWD=$(PWD)/arc )
	( cd trb      ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) test_spec \
                          PRECIS=single PWD=$(PWD)/trb )
	( cd all_go   ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) test_spec \
                          PRECIS=single PWD=$(PWD)/all_go )
	( cd lms      ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) test_spec \
                          PRECIS=single PWD=$(PWD)/lms )
	( cd sls      ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) test_spec \
                          PRECIS=single PWD=$(PWD)/sls )
	( cd uls      ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) test_spec \
                          PRECIS=single PWD=$(PWD)/uls )
	( cd sbls     ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) test_spec \
                          PRECIS=single PWD=$(PWD)/sbls )

test_spec_double:
	( cd lancelot ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) test_spec \
                          PRECIS=double PWD=$(PWD)/lancelot )
	( cd all_qp   ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) test_spec \
                          PRECIS=double PWD=$(PWD)/all_qp )
	( cd all_rq   ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) test_spec \
                          PRECIS=double PWD=$(PWD)/all_rq )
	( cd filtrane  ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) test_spec \
                          PRECIS=double PWD=$(PWD)/filtrane )
	( cd wcp      ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) test_spec \
                          PRECIS=double PWD=$(PWD)/wcp )
	( cd bsc      ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) test_spec \
                          PRECIS=double PWD=$(PWD)/bsc )
	( cd fdh      ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) test_spec \
                          PRECIS=double PWD=$(PWD)/fdh )
	( cd tru      ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) test_spec \
                          PRECIS=double PWD=$(PWD)/tru )
	( cd arc      ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) test_spec \
                          PRECIS=double PWD=$(PWD)/arc )
	( cd trb      ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) test_spec \
                          PRECIS=double PWD=$(PWD)/trb )
	( cd all_go   ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) test_spec \
                          PRECIS=double PWD=$(PWD)/all_go )
	( cd lms      ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) test_spec \
                          PRECIS=double PWD=$(PWD)/lms )
	( cd sls      ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) test_spec \
                          PRECIS=double PWD=$(PWD)/sls )
	( cd uls      ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) test_spec \
                          PRECIS=double PWD=$(PWD)/uls )
	( cd sbls     ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) test_spec \
                         PRECIS=double PWD=$(PWD)/sbls )

#  ---------------------------------
#  test everything with C interfaces
#  ---------------------------------

test_all_ciface: test_all_ciface_$(PRECIS)

test_all_ciface_single:
	( cd sls      ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
                          test_cifaces PRECIS=single PWD=$(PWD)/sls )
	( cd uls      ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
                          test_cifaces PRECIS=single PWD=$(PWD)/uls )
	( cd sbls     ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
                          test_cifaces PRECIS=single PWD=$(PWD)/sbls )
	( cd psls     ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
                          test_cifaces PRECIS=single PWD=$(PWD)/psls )
	( cd all_qp   ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
                         test_ciface PRECIS=single PWD=$(PWD)/all_qp )
	( cd all_rq   ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
                         test_ciface PRECIS=single PWD=$(PWD)/all_rq )
	( cd tru      ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
                         test_cifaces PRECIS=single PWD=$(PWD)/tru )
	( cd arc      ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
                         test_cifaces PRECIS=single PWD=$(PWD)/arc )
	( cd trb      ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
                         test_cifaces PRECIS=single PWD=$(PWD)/trb )
	( cd nls      ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
                         test_cifaces PRECIS=single PWD=$(PWD)/nls )
	( cd all_go   ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
                         test_ciface PRECIS=single PWD=$(PWD)/all_go )

test_all_ciface_double:
	( cd sls      ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
                          test_cifaces PRECIS=double PWD=$(PWD)/sls )
	( cd uls      ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
                          test_cifaces PRECIS=double PWD=$(PWD)/uls )
	( cd sbls     ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
                          test_cifaces PRECIS=double PWD=$(PWD)/sbls )
	( cd psls     ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
                          test_cifaces PRECIS=double PWD=$(PWD)/psls )
	( cd all_qp   ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
                         test_ciface PRECIS=double PWD=$(PWD)/all_qp )
	( cd all_rq   ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
                        test_ciface PRECIS=double PWD=$(PWD)/all_rq )
	( cd tru      ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
                          test_cifaces PRECIS=double PWD=$(PWD)/tru )
	( cd arc      ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
                          test_cifaces PRECIS=double PWD=$(PWD)/arc )
	( cd trb      ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
                          test_cifaces PRECIS=double PWD=$(PWD)/trb )
	( cd nls      ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
                          test_cifaces PRECIS=double PWD=$(PWD)/nls )
	( cd all_go   ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
                          test_ciface PRECIS=double PWD=$(PWD)/all_go )

#  --------------------------------------
#  test everything with python interfaces
#  --------------------------------------

test_all_pyiface: test_all_pyiface_$(PRECIS)

test_all_pyiface_single:
	( cd trb      ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
                         test_pyiface PRECIS=single PWD=$(PWD)/trb )
	( cd all_go   ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
                         test_pyiface PRECIS=single PWD=$(PWD)/all_go )

test_all_pyiface_double:
	( cd trb      ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
                         test_pyiface PRECIS=double PWD=$(PWD)/trb )
	( cd all_go   ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
                          test_pyiface PRECIS=double PWD=$(PWD)/all_go )

#  ----------
#  LANCELOT B
#  ----------

lancelotb: lancelotb_$(PRECIS)

lancelotb_single:
	( cd lancelot ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) lancelotb \
                      PRECIS=single PWD=$(PWD)/lancelot )

lancelotb_double:
	( cd lancelot ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) lancelotb \
                      PRECIS=double PWD=$(PWD)/lancelot )

lancelotb_sif: lancelotb_sif_$(PRECIS)

lancelotb_sif_single:
	( cd lancelot ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
             lancelotb_sif PRECIS=single PWD=$(PWD)/lancelot )

lancelotb_sif_double:
	( cd lancelot ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
            lancelotb_sif PRECIS=double PWD=$(PWD)/lancelot )

lancelotb_ampl: lancelotb_ampl_$(PRECIS)

lancelotb_ampl_single:
	( cd ampl ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) lancelotb_ampl \
                PRECIS=single PWD=$(PWD)/ampl CUSTOM_AMPL_FLAGS="-DLANCELOT" )

lancelotb_ampl_double:
	( cd ampl ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) lancelotb_ampl \
                PRECIS=double PWD=$(PWD)/ampl CUSTOM_AMPL_FLAGS="-DLANCELOT" )

#  -----------------------------------------------------------
#  all the regularized quadratic sub-problem solution packages
#  -----------------------------------------------------------

rq_cutest: rq_cutest_$(PRECIS)

rq_cutest_single:
	( cd all_rq ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) all_cutest \
                    PRECIS=single PWD=$(PWD)/all_rq )

rq_cutest_double:
	( cd all_rq ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) all_cutest \
                    PRECIS=double PWD=$(PWD)/all_rq )

rq: rq_$(PRECIS)

rq_single:
	( cd all_rq ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) all \
                    PRECIS=single PWD=$(PWD)/all_rq )

rq_double:
	( cd all_rq ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) all \
                    PRECIS=double PWD=$(PWD)/all_rq )

rq_matlab: rq_matlab_$(PRECIS)

rq_matlab_single:
	( cd matlab ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
                     allrq PRECIS=single PWD=$(PWD)/matlab )
rq_matlab_double:
	( cd matlab ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
                     allrq PRECIS=double PWD=$(PWD)/matlab )

rq_ciface: rq_ciface_$(PRECIS)

rq_ciface_single:
	( cd all_rq ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
                     all_ciface PRECIS=single PWD=$(PWD)/all_rq )
rq_ciface_double:
	( cd all_rq ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
                     all_ciface PRECIS=double PWD=$(PWD)/all_rq )

rq_pyiface: rq_pyiface_$(PRECIS)

rq_pyiface_single:
	( cd all_rq ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
                     all_pyiface PRECIS=single PWD=$(PWD)/all_rq )
rq_pyiface_double:
	( cd all_rq ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
                     all_pyiface PRECIS=double PWD=$(PWD)/all_rq )

#  -------------------
#  all the QP packages
#  -------------------

qp_cutest: qp_cutest_$(PRECIS)

qp_cutest_single:
	( cd all_qp ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) all_cutest \
                    PRECIS=single PWD=$(PWD)/all_qp )

qp_cutest_double:
	( cd all_qp ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) all_cutest \
                    PRECIS=double PWD=$(PWD)/all_qp )

qp_ampl: qp_ampl_$(PRECIS)

qp_ampl_single:
	( cd ampl ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) qp_ampl \
                  PRECIS=single PWD=$(PWD)/ampl \
                  CUSTOM_AMPL_FLAGS="-DQP -DCQP -DQPA -DQPB -DQPC -DPRESOLVE" )

qp_ampl_double:
	( cd ampl ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) qp_ampl \
                  PRECIS=double PWD=$(PWD)/ampl \
                  CUSTOM_AMPL_FLAGS="-DQP -DCQP -DQPA -DQPB -DQPC -DPRESOLVE" )

qp: qp_$(PRECIS)

qp_single:
	( cd all_qp ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) all \
                    PRECIS=single PWD=$(PWD)/all_qp )

qp_double:
	( cd all_qp ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) all \
                    PRECIS=double PWD=$(PWD)/all_qp )

qp_matlab: qp_matlab_$(PRECIS)

qp_matlab_single:
	( cd matlab ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
                     allqp PRECIS=single PWD=$(PWD)/matlab )
qp_matlab_double:
	( cd matlab ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
                     allqp PRECIS=double PWD=$(PWD)/matlab )

qp_ciface: qp_ciface_$(PRECIS)

qp_ciface_single:
	( cd all_qp ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
                     all_ciface all_qplib PRECIS=single PWD=$(PWD)/all_qp )
qp_ciface_double:
	( cd all_qp ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
                     all_ciface all_qplib PRECIS=double PWD=$(PWD)/all_qp )

qp_pyiface: qp_pyiface_$(PRECIS)

qp_pyiface_single:
	( cd all_qp ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
                     all_pyiface all_qplib PRECIS=single PWD=$(PWD)/all_qp )
qp_pyiface_double:
	( cd all_qp ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
                     all_pyiface all_qplib PRECIS=double PWD=$(PWD)/all_qp )

#  ------------------------------------------------
#  all the unconstrained/bound-constrained packages
#  ------------------------------------------------

ucbc_cutest: ucbc_cutest_$(PRECIS)

ucbc_cutest_single:
	( cd tru ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
                    tru_cutest PRECIS=single PWD=$(PWD)/tru )
	( cd arc ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
                    arc_cutest PRECIS=single PWD=$(PWD)/arc )
	( cd trb ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
                    trb_cutest PRECIS=single PWD=$(PWD)/trb )
	( cd nls ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
                    nls_cutest PRECIS=single PWD=$(PWD)/nls )

ucbc_cutest_double:
	( cd tru ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
                     tru_cutest PRECIS=double PWD=$(PWD)/tru )
	( cd arc ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
                     arc_cutest PRECIS=double PWD=$(PWD)/arc )
	( cd trb ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
                     trb_cutest PRECIS=double PWD=$(PWD)/trb )
	( cd nls ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
                     nls_cutest PRECIS=double PWD=$(PWD)/nls )

ucbc: ucbc_$(PRECIS)

ucbc_single: ucbc_cutest_single
ucbc_double: ucbc_cutest_double

ucbc_matlab: ucbc_matlab_$(PRECIS)

ucbc_matlab_single:
	( cd matlab ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
                     allucbc PRECIS=single PWD=$(PWD)/matlab )
ucbc_matlab_double:
	( cd matlab ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
                     allucbc PRECIS=double PWD=$(PWD)/matlab )

ucbc_ciface: ucbc_ciface_$(PRECIS)

ucbc_ciface_single:
	( cd tru ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
                    tru_ciface PRECIS=single PWD=$(PWD)/tru )
	( cd arc ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
                    arc_ciface PRECIS=single PWD=$(PWD)/arc )
	( cd trb ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
                    trb_ciface PRECIS=single PWD=$(PWD)/trb )
	( cd nls ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
                    nls_ciface PRECIS=single PWD=$(PWD)/nls )
ucbc_ciface_double:
	( cd tru ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
                     tru_ciface PRECIS=double PWD=$(PWD)/tru )
	( cd arc ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
                     arc_ciface PRECIS=double PWD=$(PWD)/arc )
	( cd trb ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
                     trb_ciface PRECIS=double PWD=$(PWD)/trb )
	( cd nls ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
                     nls_ciface PRECIS=double PWD=$(PWD)/nls )

ucbc_pyiface: ucbc_pyiface_$(PRECIS)

ucbc_pyiface_single:
	( cd tru ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
                    tru_pyiface PRECIS=single PWD=$(PWD)/tru )
	( cd arc ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
                    arc_pyiface PRECIS=single PWD=$(PWD)/arc )
	( cd trb ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
                    trb_pyiface PRECIS=single PWD=$(PWD)/trb )
	( cd nls ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
                    nls_pyiface PRECIS=single PWD=$(PWD)/nls )
ucbc_pyiface_double:
	( cd tru ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
                     tru_pyiface PRECIS=double PWD=$(PWD)/tru )
	( cd arc ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
                     arc_pyiface PRECIS=double PWD=$(PWD)/arc )
	( cd trb ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
                     trb_pyiface PRECIS=double PWD=$(PWD)/trb )
	( cd nls ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
                     nls_pyiface PRECIS=double PWD=$(PWD)/nls )

#  ------------------------------------
#  all the global optimization packages
#  ------------------------------------

go_cutest: go_cutest_$(PRECIS)

go_cutest_single:
	( cd all_go ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) all_cutest \
                    PRECIS=single PWD=$(PWD)/all_go )

go_cutest_double:
	( cd all_go ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) all_cutest \
                    PRECIS=double PWD=$(PWD)/all_go )

go: go_$(PRECIS)

go_single:
	( cd all_go ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) all \
                    PRECIS=single PWD=$(PWD)/all_go )

go_double:
	( cd all_go ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) all \
                    PRECIS=double PWD=$(PWD)/all_go )

go_matlab: go_matlab_$(PRECIS)

go_matlab_single:
	( cd matlab ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
                     allgo PRECIS=single PWD=$(PWD)/matlab )
go_matlab_double:
	( cd matlab ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
                     allgo PRECIS=double PWD=$(PWD)/matlab )

go_ciface: go_ciface_$(PRECIS)

go_ciface_single:
	( cd all_go ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
                     all_ciface PRECIS=single PWD=$(PWD)/all_go )
go_ciface_double:
	( cd all_go ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
                     all_ciface PRECIS=double PWD=$(PWD)/all_go )

go_pyiface: go_pyiface_$(PRECIS)

go_pyiface_single:
	( cd all_go ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
                     all_pyiface PRECIS=single PWD=$(PWD)/all_go )
go_pyiface_double:
	( cd all_go ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
                     all_pyiface PRECIS=double PWD=$(PWD)/all_go )

#  ---
#  qpa
#  ---

qpa_cutest: qpa_cutest_$(PRECIS)

qpa_cutest_single:
	( cd qpa ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) qpa_cutest \
                    PRECIS=single PWD=$(PWD)/qpa )

qpa_cutest_double:
	( cd qpa ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) qpa_cutest \
                    PRECIS=double PWD=$(PWD)/qpa )

qpa: qpa_$(PRECIS)

qpa_single:
	( cd qpa ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) qpa \
                    PRECIS=single PWD=$(PWD)/qpa )

qpa_double:
	( cd qpa ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) qpa \
                    PRECIS=double PWD=$(PWD)/qpa )

#  ---
#  qpb
#  ---

qpb_cutest: qpb_cutest_$(PRECIS)

qpb_cutest_single:
	( cd qpb ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) qpb_cutest \
                    PRECIS=single PWD=$(PWD)/qpb )

qpb_cutest_double:
	( cd qpb ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) qpb_cutest \
                    PRECIS=double PWD=$(PWD)/qpb )

qpb: qpb_$(PRECIS)

qpb_single:
	( cd qpb ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) qpb \
                    PRECIS=single PWD=$(PWD)/qpb )

qpb_double:
	( cd qpb ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) qpb \
                    PRECIS=double PWD=$(PWD)/qpb )

#  ---
#  qpc
#  ---

qpc_cutest: qpc_cutest_$(PRECIS)

qpc_cutest_single:
	( cd qpc ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) qpc_cutest \
                    PRECIS=single PWD=$(PWD)/qpc )

qpc_cutest_double:
	( cd qpc ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) qpc_cutest \
                    PRECIS=double PWD=$(PWD)/qpc )

qpc: qpc_$(PRECIS)

qpc_single:
	( cd qpc ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) qpc \
                    PRECIS=single PWD=$(PWD)/qpc )

qpc_double:
	( cd qpc ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) qpc \
                    PRECIS=double PWD=$(PWD)/qpc )

#  ---
#  cqp
#  ---

cqp_cutest: cqp_cutest_$(PRECIS)

cqp_cutest_single:
	( cd cqp ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) cqp_cutest \
                    PRECIS=single PWD=$(PWD)/cqp )

cqp_cutest_double:
	( cd cqp ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) cqp_cutest \
                    PRECIS=double PWD=$(PWD)/cqp )

cqp: cqp_$(PRECIS)

cqp_single:
	( cd cqp ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) cqp \
                    PRECIS=single PWD=$(PWD)/cqp )

cqp_double:
	( cd cqp ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) cqp \
                    PRECIS=double PWD=$(PWD)/cqp )

#  ---
#  dqp
#  ---

dqp_cutest: dqp_cutest_$(PRECIS)

dqp_cutest_single:
	( cd dqp ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) dqp_cutest \
                    PRECIS=single PWD=$(PWD)/dqp )

dqp_cutest_double:
	( cd dqp ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) dqp_cutest \
                    PRECIS=double PWD=$(PWD)/dqp )

dqp: dqp_$(PRECIS)

dqp_single:
	( cd dqp ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) dqp \
                    PRECIS=single PWD=$(PWD)/dqp )

dqp_double:
	( cd dqp ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) dqp \
                    PRECIS=double PWD=$(PWD)/dqp )

#  --------
#  presolve
#  --------

pre_cutest: pre_cutest_$(PRECIS)

pre_cutest_single:
	( cd presolve ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
                         presolve_cutest PRECIS=single PWD=$(PWD)/presolve )

pre_cutest_double:
	( cd presolve ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
                         presolve_cutest PRECIS=double PWD=$(PWD)/presolve )

pre: pre_$(PRECIS)

pre_single:
	( cd presolve ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
                          presolve PRECIS=single PWD=$(PWD)/presolve )

pre_double:
	( cd presolve ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
                          presolve PRECIS=double PWD=$(PWD)/presolve )

#  --------
#  FILTRANE
#  --------

filtrane_cutest: filtrane_cutest_$(PRECIS)

filtrane_cutest_single:
	( cd filtrane ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
                        filtrane_cutest PRECIS=single PWD=$(PWD)/filtrane )

filtrane_cutest_double:
	( cd filtrane ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
                        filtrane_cutest PRECIS=double PWD=$(PWD)/filtrane )

filtrane_ampl: filtrane_ampl_$(PRECIS)

filtrane_ampl_single:
	( cd ampl ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) filtrane_ampl \
              PRECIS=single PWD=$(PWD)/ampl CUSTOM_AMPL_FLAGS="-DFILTRANE")

filtrane_ampl_double:
	( cd ampl ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) filtrane_ampl \
              PRECIS=double PWD=$(PWD)/ampl CUSTOM_AMPL_FLAGS="-DFILTRANE")

filtrane: filtrane_$(PRECIS)

filtrane_single:
	( cd filtrane ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) filtrane \
                      PRECIS=single PWD=$(PWD)/filtrane )

filtrane_double:
	( cd filtrane ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) filtrane \
                      PRECIS=double PWD=$(PWD)/filtrane )

#  ------
#  superb
#  ------

superb_cutest: superb_cutest_$(PRECIS)

superb_cutest_single:
	( cd oblivion/superb ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
            superb_cutest PRECIS=single PWD=$(PWD)/oblivion/superb )

superb_cutest_double:
	( cd oblivion/superb ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
            superb_cutest PRECIS=double PWD=$(PWD)/oblivion/superb )

superb: superb_$(PRECIS)

superb_single:
	( cd oblivion/superb ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
            superb PRECIS=single PWD=$(PWD)/oblivion/superb )

superb_double:
	( cd oblivion/superb ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
            superb PRECIS=double PWD=$(PWD)/oblivion/superb )

#  -----
#  fastr
#  -----

fastr_cutest: fastr_cutest_$(PRECIS)

fastr_cutest_single:
	( cd oblivion/fastr ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
            fastr_cutest PRECIS=single PWD=$(PWD)/oblivion/fastr )

fastr_cutest_double:
	( cd oblivion/fastr ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
            fastr_cutest PRECIS=double PWD=$(PWD)/oblivion/fastr )

fastr: fastr_$(PRECIS)

fastr_single:
	( cd oblivion/fastr ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
            fastr PRECIS=single PWD=$(PWD)/oblivion/fastr )

fastr_double:
	( cd oblivion/fastr ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
            fastr PRECIS=double PWD=$(PWD)/oblivion/fastr )

#  -----
#  fisqp
#  -----

fisqp_cutest: fisqp_cutest_$(PRECIS)

fisqp_cutest_single:
	( cd forthcoming/fisqp ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
               fisqp_cutest PRECIS=single PWD=$(PWD)/forthcoming/fisqp )

fisqp_cutest_double:
	( cd forthcoming/fisqp ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
               fisqp_cutest PRECIS=double PWD=$(PWD)/forthcoming/fisqp )

fisqp: fisqp_$(PRECIS)

fisqp_single:
	( cd forthcoming/fisqp ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
               fisqp PRECIS=single PWD=$(PWD)/forthcoming/fisqp )

fisqp_double:
	( cd forthcoming/fisqp ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
               fisqp PRECIS=double PWD=$(PWD)/forthcoming/fisqp )

#  ---
#  sqp
#  ---

sqp_cutest: sqp_cutest_$(PRECIS)

sqp_cutest_single:
	( cd oblivion/sqp ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
            sqp_cutest PRECIS=single PWD=$(PWD)/oblivion/sqp )

sqp_cutest_double:
	( cd oblivion/sqp ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
            sqp_cutest PRECIS=double PWD=$(PWD)/oblivion/sqp )

sqp: sqp_$(PRECIS)

sqp_single:
	( cd oblivion/sqp ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
            sqp PRECIS=single PWD=$(PWD)/oblivion/sqp )

sqp_double:
	( cd oblivion/sqp ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
            sqp PRECIS=double PWD=$(PWD)/oblivion/sqp )

#  -----
#  lpsqp
#  -----

lpsqp_cutest: lpsqp_cutest_$(PRECIS)

lpsqp_cutest_single:
	( cd oblivion/lpsqp ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
            lpsqp_cutest PRECIS=single PWD=$(PWD)/oblivion/lpsqp )

lpsqp_cutest_double:
	( cd oblivion/lpsqp ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
            lpsqp_cutest PRECIS=double PWD=$(PWD)/oblivion/lpsqp )

lpsqp: lpsqp_$(PRECIS)

lpsqp_single:
	( cd oblivion/lpsqp ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
            lpsqp PRECIS=single PWD=$(PWD)/oblivion/lpsqp )

lpsqp_double:
	( cd oblivion/lpsqp ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
            lpsqp PRECIS=double PWD=$(PWD)/oblivion/lpsqp )

#  ----
#  s2qp
#  ----

s2qp_cutest: s2qp_cutest_$(PRECIS)

s2qp_cutest_single:
	( cd oblivion/s2qp ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
            s2qp_cutest PRECIS=single PWD=$(PWD)/oblivion/s2qp )

s2qp_cutest_double:
	( cd oblivion/s2qp ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
            s2qp_cutest PRECIS=double PWD=$(PWD)/oblivion/s2qp )

s2qp: s2qp_$(PRECIS)

s2qp_single:
	( cd oblivion/s2qp ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
            s2qp PRECIS=single PWD=$(PWD)/oblivion/s2qp )

s2qp_double:
	( cd oblivion/s2qp ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
            s2qp PRECIS=double PWD=$(PWD)/oblivion/s2qp )

#  ---
#  ism
#  ---

ism_cutest: ism_cutest_$(PRECIS)

ism_cutest_single:
	( cd oblivion/ism ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
            ism_cutest PRECIS=single PWD=$(PWD)/oblivion/ism )

ism_cutest_double:
	( cd oblivion/ism ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
            ism_cutest PRECIS=double PWD=$(PWD)/oblivion/ism )

ism: ism_$(PRECIS)

ism_single:
	( cd oblivion/ism ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
            ism PRECIS=single PWD=$(PWD)/oblivion/ism )

ism_double:
	( cd oblivion/ism ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
            ism PRECIS=double PWD=$(PWD)/oblivion/ism )

#  ----
#  ermo
#  ----

ermo_cutest: ermo_cutest_$(PRECIS)

ermo_cutest_single:
	( cd oblivion/ermo ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
            ermo_cutest PRECIS=single PWD=$(PWD)/oblivion/ermo )

ermo_cutest_double:
	( cd oblivion/ermo ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
            ermo_cutest PRECIS=double PWD=$(PWD)/oblivion/ermo )

ermo: ermo_$(PRECIS)

ermo_single:
	( cd oblivion/ermo ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
            ermo PRECIS=single PWD=$(PWD)/oblivion/ermo )

ermo_double:
	( cd oblivion/ermo ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
            ermo PRECIS=double PWD=$(PWD)/oblivion/ermo )

#  ---
#  arc
#  ---

arc_cutest: arc_cutest_$(PRECIS)

arc_cutest_single:
	( cd arc ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) arc_cutest \
                    PRECIS=single PWD=$(PWD)/arc )

arc_cutest_double:
	( cd arc ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) arc_cutest \
                    PRECIS=double PWD=$(PWD)/arc )

arc: arc_$(PRECIS)

arc_single:
	( cd arc ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) arc \
                    PRECIS=single PWD=$(PWD)/arc )

arc_double:
	( cd arc ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) arc \
                    PRECIS=double PWD=$(PWD)/arc )

#  ----
#  barc
#  ----

barc_cutest: barc_cutest_$(PRECIS)

barc_cutest_single:
	( cd forthcoming/barc ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
            barc_cutest PRECIS=single PWD=$(PWD)/forthcoming/barc )

barc_cutest_double:
	( cd forthcoming/barc ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
            barc_cutest PRECIS=double PWD=$(PWD)/forthcoming/barc )

barc: barc_$(PRECIS)

barc_single:
	( cd forthcoming/barc ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
            barc PRECIS=single PWD=$(PWD)/forthcoming/barc )

barc_double:
	( cd forthcoming/barc ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
            barc PRECIS=double PWD=$(PWD)/forthcoming/barc )

#  ---
#  tru
#  ---

tru_cutest: tru_cutest_$(PRECIS)

tru_cutest_single:
	( cd tru ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) tru_cutest \
                    PRECIS=single PWD=$(PWD)/tru )

tru_cutest_double:
	( cd tru ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) tru_cutest \
                    PRECIS=double PWD=$(PWD)/tru )

tru: tru_$(PRECIS)

tru_single:
	( cd tru ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) tru \
                    PRECIS=single PWD=$(PWD)/tru )

tru_double:
	( cd tru ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) tru \
                    PRECIS=double PWD=$(PWD)/tru )

#  ---
#  trb
#  ---

trb_cutest: trb_cutest_$(PRECIS)

trb_cutest_single:
	( cd trb ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
            trb_cutest PRECIS=single PWD=$(PWD)/trb )

trb_cutest_double:
	( cd trb ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
            trb_cutest PRECIS=double PWD=$(PWD)/trb )

trb: trb_$(PRECIS)

trb_single:
	( cd trb ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
            trb PRECIS=single PWD=$(PWD)/trb )

trb_double:
	( cd trb ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
            trb PRECIS=double PWD=$(PWD)/trb )

#  ------
#  funnel
#  ------

funnel_cutest: funnel_cutest_$(PRECIS)

funnel_cutest_single:
	( cd oblivion/funnel ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
            funnel_cutest PRECIS=single PWD=$(PWD)/oblivion/funnel )

funnel_cutest_double:
	( cd oblivion/funnel ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
            funnel_cutest PRECIS=double PWD=$(PWD)/oblivion/funnel )

funnel: funnel_$(PRECIS)

funnel_single:
	( cd oblivion/funnel ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
            funnel PRECIS=single PWD=$(PWD)/oblivion/funnel )

funnel_double:
	( cd oblivion/funnel ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
            funnel PRECIS=double PWD=$(PWD)/oblivion/funnel )

#  ---
#  wcp
#  ---

wcp_cutest: wcp_cutest_$(PRECIS)

wcp_cutest_single:
	( cd wcp ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) wcp_cutest \
                    PRECIS=single PWD=$(PWD)/wcp )

wcp_cutest_double:
	( cd wcp ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) wcp_cutest \
                    PRECIS=double PWD=$(PWD)/wcp )

wcp: wcp_$(PRECIS)

wcp_single:
	( cd wcp ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) wcp \
                    PRECIS=single PWD=$(PWD)/wcp )

wcp_double:
	( cd wcp ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) wcp \
                    PRECIS=double PWD=$(PWD)/wcp )

#  ---
#  lcf
#  ---

lcf_cutest: lcf_cutest_$(PRECIS)

lcf_cutest_single:
	( cd oblivion/lcf ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
            lcf_cutest PRECIS=single PWD=$(PWD)/oblivion/lcf )

lcf_cutest_double:
	( cd oblivion/lcf ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
            lcf_cutest PRECIS=double PWD=$(PWD)/oblivion/lcf )

lcf: lcf_$(PRECIS)

lcf_single:
	( cd oblivion/lcf ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
            lcf PRECIS=single PWD=$(PWD)/oblivion/lcf )

lcf_double:
	( cd oblivion/lcf ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
            lcf PRECIS=double PWD=$(PWD)/oblivion/lcf )

#  ---
#  fdh
#  ---

fdh_cutest: fdh_cutest_$(PRECIS)

fdh_cutest_single:
	( cd fdh ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) fdh_cutest \
                    PRECIS=single PWD=$(PWD)/fdh )

fdh_cutest_double:
	( cd fdh ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) fdh_cutest \
                    PRECIS=double PWD=$(PWD)/fdh )

fdh: fdh_$(PRECIS)

fdh_single:
	( cd fdh ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) fdh \
                    PRECIS=single PWD=$(PWD)/fdh )

fdh_double:
	( cd fdh ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) fdh \
                    PRECIS=double PWD=$(PWD)/fdh )

#  ---
#  bsc
#  ---

bsc_cutest: bsc_cutest_$(PRECIS)

bsc_cutest_single:
	( cd bsc ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) bsc_cutest \
                    PRECIS=single PWD=$(PWD)/bsc )

bsc_cutest_double:
	( cd bsc ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) bsc_cutest \
                    PRECIS=double PWD=$(PWD)/bsc )

bsc: bsc_$(PRECIS)

bsc_single:
	( cd bsc ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) bsc \
                    PRECIS=single PWD=$(PWD)/bsc )

bsc_double:
	( cd bsc ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) bsc \
                    PRECIS=double PWD=$(PWD)/bsc )

#  ---
#  bgo
#  ---

bgo_cutest: bgo_cutest_$(PRECIS)

bgo_cutest_single:
	( cd bgo ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
            bgo_cutest PRECIS=single PWD=$(PWD)/bgo )

bgo_cutest_double:
	( cd bgo ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
            bgo_cutest PRECIS=double PWD=$(PWD)/bgo )

bgo: bgo_$(PRECIS)

bgo_single:
	( cd bgo ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
            bgo PRECIS=single PWD=$(PWD)/bgo )

bgo_double:
	( cd bgo ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
            bgo PRECIS=double PWD=$(PWD)/bgo )

#  ---
#  dgo
#  ---

dgo_cutest: dgo_cutest_$(PRECIS)

dgo_cutest_single:
	( cd dgo ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
            dgo_cutest PRECIS=single PWD=$(PWD)/dgo )

dgo_cutest_double:
	( cd dgo ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
            dgo_cutest PRECIS=double PWD=$(PWD)/dgo )

dgo: dgo_$(PRECIS)

dgo_single:
	( cd dgo ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
            dgo PRECIS=single PWD=$(PWD)/dgo )

dgo_double:
	( cd dgo ; $(MAKE) -f $(GALAHAD)/makefiles/$(VERSION) \
            dgo PRECIS=double PWD=$(PWD)/dgo )

#  create shared libraries

create_shared:
	cd $(OBJ); CC=$(CC) FORTRAN=$(FORTRAN) OPTIMIZATION=$(OPTIMIZATION) \
                   SHARED=$(SHARED) DLEXT=$(DLEXT) LOADALL=$(LOADALL) \
                   LOADNONE=$(LOADNONE) \
                   $(BINSHELL) $(GALAHAD)/bin/create_shared

create_one_shared:
	cd $(OBJ); CC=$(CC) FORTRAN=$(FORTRAN) OPTIMIZATION=$(OPTIMIZATION) \
                   SHARED=$(SHARED) DLEXT=$(DLEXT) LOADALL=$(LOADALL) \
                   LOADNONE=$(LOADNONE) NOUNDEFINED=$(NOUNDEFINED)  \
                   $(BINSHELL) $(GALAHAD)/bin/create_one_shared

build_one_shared:
	cd $(OBJ); CC=$(CC) FORTRAN=$(FORTRAN) OPTIMIZATION=$(OPTIMIZATION) \
                   SHARED=$(SHARED) DLEXT=$(DLEXT) AR=$(AR) \
                   $(BINSHELL) $(GALAHAD)/bin/build_one_shared

#  book keeping

clean:
	@printf ' %-9s\t\t' "Cleaning"
	$(RM) $(OBJ)/*
	@printf '[ OK ]\n'

cleanall:
	@printf ' %-14s\t\t' "Removing all $(PRECIS) precision object and module files"
	$(RM) -r $(OBJ)/* $(MOD)/*
	@printf '[ OK ]\n'
